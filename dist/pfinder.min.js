(()=>{var c=new Map,d=1e3,W=class{constructor(t){this.items=[],this.prop=t}push(t){if(!this.items.length){t.inOpen=!0,this.items.push(t);return}for(let l=this.items.length-1;l>=0;l--)if(this.items[l][this.prop]>=t[this.prop]){this.items.splice(l+1,0,t);return}this.items.unshift(t)}};function w(s,t,l){let i=[],e=s;for(;e&&(i.push({x:e.x,y:e.y}),!(e.x==t&&e.y==l));)e=e.parent;return i.reverse()}function C(s,t,l){let i=Math.abs(s.x-t),e=Math.abs(s.y-l);return 10*(i+e)-5.857*Math.min(i,e)}function M(s,t,l){return{x:s,y:t,parent:null,children:[],isWall:l,inOpen:!1,inClose:!1,g:0,f:0}}function P(s,t,l,i,e){c.size>d&&c.delete(c.keys().next().value);let r=t+"."+l+"."+i+"."+e;c.set(r,s)}function k(s){let t=s.length,l=s[0].length,i=[];for(let e=0;e<l;e++){let r=new Array(t).fill(0);r.forEach((o,h)=>{r[h]=M(h,e,s[e][h])}),i.push(r)}for(let e=0;e<l;e++){let r=i[e];r.forEach((o,h)=>{let a=[],p=!1,f=!1,u=!1,g=!1;if(h>0){let n=r[h-1];n.isWall||a.push(n),u=!0}if(h<t-1){let n=r[h+1];n.isWall||a.push(n),g=!0}if(e>0){let n=i[e-1][h];n.isWall||a.push(n),p=!0}if(e<l-1){let n=i[e+1][h];n.isWall||a.push(n),f=!0}if(p&&u){let n=i[e-1][h-1];n.isWall||a.push(n)}if(p&&g){let n=i[e-1][h+1];n.isWall||a.push(n)}if(f&&u){let n=i[e+1][h-1];n.isWall||a.push(n)}if(f&&g){let n=i[e+1][h+1];n.isWall||a.push(n)}i[e][h].children=a})}return i}function m(s,t,l,i,e){if(s[l][t].isWall||s[e][i].isWall)return null;let r=Math.random();s[l][t].signature=r,s[l][t].inOpen=!1,s[l][t].inClose=!1;let o=new W("f"),h=[];for(o.push(s[l][t]);o.items.length;){let a=o.items.pop();if(a.inOpen=!1,h.push(a),a.inClose=!0,a.x==i&&a.y==e)return w(a,t,l);a.children.forEach(f=>{if(f.signature!=r&&(f.signature=r,f.inClose=!1,f.inOpen=!1,f.f=0,f.g=0),f.inClose)return;let u=a.g+1;f.g<u&&(f.parent=a,f.g=u,f.f=u+C(f,i,e),f.inOpen||o.push(f))})}return null}function O(s,t,l,i,e){if(s[l][t].isWall||s[e][i].isWall)return null;let r=c.get(t+"."+l+"."+i+"."+e);return r!==void 0||(r=m(s,t,l,i,e),P(r,t,l,i,e)),r}function b(s){d=s}typeof window<"u"&&(globalThis.Pfinder={getPath:m,getPathFromCache:O,makeGrid:k,setMaxCacheSize:b});})();
/**
* @copyright    2023 Juan Jose Capellan
* @license      {@link https://github.com/jjcapellan/pfinder/blob/master/LICENSE | MIT License}
*/
