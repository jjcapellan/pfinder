(()=>{var o=new Map,m=1e3,g=class{constructor(t){this.items=[],this.prop=t}push(t){if(!this.items.length){this.items.push(t);return}for(let i=this.items.length-1;i>=0;i--)if(this.items[i][this.prop]>=t[this.prop]){this.items.splice(i+1,0,t);return}this.items.unshift(t)}};function d(r,t,i){let s=[],e=r;for(;e&&(s.push({x:e.x,y:e.y}),!(e.x==t&&e.y==i));)e=e.parent;return s.reverse()}function M(r,t,i){let s=Math.abs(r.x-t),e=Math.abs(r.y-i);return 10*(s+e)-5.857*Math.min(s,e)}function P(r,t,i){return{x:r,y:t,parent:null,children:[],isWall:i,g:0,h:0,f:0}}function k(r,t,i,s,e){o.size>m&&o.delete(o.keys().next().value);let n=t+"."+i+"."+s+"."+e;o.set(n,r)}function W(r){let t=r.length,i=r[0].length,s=[];for(let e=0;e<i;e++){let n=new Array(t).fill(0);n.forEach((a,l)=>{n[l]=P(l,e,r[e][l])}),s.push(n)}for(let e=0;e<i;e++){let n=s[e];n.forEach((a,l)=>{let h=[],c=!1,u=!1,f=!1,p=!1;l>0&&(h.push(n[l-1]),f=!0),l<t-1&&(h.push(n[l+1]),p=!0),e>0&&(h.push(s[e-1][l]),c=!0),e<i-1&&(h.push(s[e+1][l]),u=!0),c&&f&&h.push(s[e-1][l-1]),c&&p&&h.push(s[e-1][l+1]),u&&f&&h.push(s[e+1][l-1]),u&&p&&h.push(s[e+1][l+1]),s[e][l].children=h})}return s}function w(r,t,i,s,e){if(r[i][t].isWall||r[e][s].isWall)return null;let n=Math.random();r[i][t].signature=n;let a=new g("f"),l=[];for(a.push(r[i][t]);a.items.length;){let h=a.items.pop();if(l.push(h),h.x==s&&h.y==e)return d(h,t,i);h.children.forEach(u=>{if(u.isWall||l.includes(u))return;u.signature!=n&&(u.signature=n,u.f=0,u.g=0);let f=h.g+1;u.g<f&&(u.parent=h,u.g=f,u.f=f+M(u,s,e),a.items.includes(u)||a.push(u))})}return null}function b(r,t,i,s,e){if(r[i][t].isWall||r[e][s].isWall)return null;let n=o.get(t+"."+i+"."+s+"."+e);return n!==void 0||(n=w(r,t,i,s,e),k(n,t,i,s,e)),n}function C(r){m=r}typeof window<"u"&&(globalThis.Pfinder={getPath:w,getPathFromCache:b,makeGrid:W,setMaxCacheSize:C});})();
/**
* @copyright    2023 Juan Jose Capellan
* @license      {@link https://github.com/jjcapellan/pfinder/blob/master/LICENSE | MIT License}
*/
