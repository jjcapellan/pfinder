(()=>{var o=new Map,g=1e3;function d(l,n,r){let t=[],e=l;for(;e&&(t.push({x:e.x,y:e.y}),!(e.x==n&&e.y==r));)e=e.parent;return t.reverse()}function M(l,n,r){let t=Math.abs(l.x-n),e=Math.abs(l.y-r);return 10*(t+e)-5.857*Math.min(t,e)}function P(l,n,r){return{x:l,y:n,parent:null,children:[],isWall:r,g:0,h:0,f:0}}function k(l,n,r,t,e){o.size>g&&o.delete(o.keys().next().value);let a=n+"."+r+"."+t+"."+e;o.set(a,l)}function m(l){let n=l.length,r=l[0].length,t=[];for(let e=0;e<r;e++){let a=new Array(n).fill(0);a.forEach((f,h)=>{a[h]=P(h,e,l[e][h])}),t.push(a)}for(let e=0;e<r;e++){let a=t[e];a.forEach((f,h)=>{let u=[],c=!1,p=!1,i=!1,s=!1;h>0&&(u.push(a[h-1]),i=!0),h<n-1&&(u.push(a[h+1]),s=!0),e>0&&(u.push(t[e-1][h]),c=!0),e<r-1&&(u.push(t[e+1][h]),p=!0),c&&i&&u.push(t[e-1][h-1]),c&&s&&u.push(t[e-1][h+1]),p&&i&&u.push(t[e+1][h-1]),p&&s&&u.push(t[e+1][h+1]),t[e][h].children=u})}return t}function w(l,n,r,t,e){if(l[r][n].isWall||l[e][t].isWall)return null;let a=Math.random();l[r][n].signature=a;let f=[],h=[];for(f.push(l[r][n]);f.length;){let u=f[0],c=0;if(f.forEach((i,s)=>{i.f<u.f&&(u=i,c=s)}),f.splice(c,1),h.push(u),u.x==t&&u.y==e)return d(u,n,r);u.children.forEach(i=>{if(i.isWall||h.includes(i))return;i.signature!=a&&(i.signature=a,i.f=0,i.g=0);let s=u.g+1;i.g<s&&(i.parent=u,i.g=s,i.f=s+M(i,t,e),f.includes(i)||f.push(i))})}return null}function W(l,n,r,t,e){if(l[r][n].isWall||l[e][t].isWall)return null;let a=o.get(n+"."+r+"."+t+"."+e);return a!==void 0||(a=w(l,n,r,t,e),k(a,n,r,t,e)),a}function b(l){g=l}typeof window<"u"&&(globalThis.Pfinder={getPath:w,getPathFromCache:W,makeGrid:m,setMaxCacheSize:b});})();
/**
* @copyright    2023 Juan Jose Capellan
* @license      {@link https://github.com/jjcapellan/pfinder/blob/master/LICENSE | MIT License}
*/
