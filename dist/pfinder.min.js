(()=>{var g=new Map,k=1e3,O=0,P=class{constructor(i){this.items=[],this.prop=i}push(i){if(!this.items.length){i.inOpen=!0,this.items.push(i);return}for(let n=this.items.length-1;n>=0;n--)if(this.items[n][this.prop]>=i[this.prop]){this.items.splice(n+1,0,i);return}this.items.unshift(i)}};function b(f,i,n){let a=[],t=f,l=0;for(;t&&(a[l++]={x:t.x,y:t.y},!(t.x==i&&t.y==n));)t=t.parent;return a.reverse()}function z(f,i,n){let a=Math.abs(f.x-i),t=Math.abs(f.y-n);return 10*(a+t)-5.857*Math.min(a,t)}function S(f,i,n){return{x:f,y:i,parent:null,children:[],isWall:n,inOpen:!1,inClose:!1,g:0,f:0}}function v(f,i,n,a,t){g.size>k&&g.delete(g.keys().next().value);let l=i+"."+n+"."+a+"."+t;g.set(l,f)}function E(f,i){let n=f.length,a=f[0].length,t=[];for(let l=0;l<a;l++){let h=new Array(n).fill(0);h.forEach((u,r)=>{h[r]=S(r,l,f[l][r])}),t.push(h)}for(let l=0;l<a;l++){let h=t[l];h.forEach((u,r)=>{let s=[],o=!1,p=!1,c=!1,W=!1,w=!1,d=!1,m=!1,C=!1;if(r>0){let e=h[r-1];c=!0,e.isWall&&(m=!0),e.isWall||s.push(e)}if(r<n-1){let e=h[r+1];W=!0,e.isWall&&(C=!0),e.isWall||s.push(e)}if(l>0){let e=t[l-1][r];o=!0,e.isWall&&(w=!0),e.isWall||s.push(e)}if(l<a-1){let e=t[l+1][r];p=!0,e.isWall&&(d=!0),e.isWall||s.push(e)}if(i){if(o&&c){let e=t[l-1][r-1];e.isWall||s.push(e)}if(o&&W){let e=t[l-1][r+1];e.isWall||s.push(e)}if(p&&c){let e=t[l+1][r-1];e.isWall||s.push(e)}if(p&&W){let e=t[l+1][r+1];e.isWall||s.push(e)}}else{if(o&&c&&!(w&&m)){let e=t[l-1][r-1];e.isWall||s.push(e)}if(o&&W&&!(w&&C)){let e=t[l-1][r+1];e.isWall||s.push(e)}if(p&&c&&!(d&&m)){let e=t[l+1][r-1];e.isWall||s.push(e)}if(p&&W&&!(d&&C)){let e=t[l+1][r+1];e.isWall||s.push(e)}}t[l][r].children=s})}return t}function M(f,i,n,a,t){if(f[n][i].isWall||f[t][a].isWall)return null;let l=O++;f[n][i].signature=l,f[n][i].inOpen=!1,f[n][i].inClose=!1;let h=new P("f");for(h.push(f[n][i]);h.items.length;){let u=h.items.pop();if(u.inOpen=!1,u.inClose=!0,u.x==a&&u.y==t)return b(u,i,n);u.children.forEach(s=>{if(s.signature!=l&&(s.signature=l,s.inClose=!1,s.inOpen=!1,s.f=0,s.g=0),s.inClose)return;let o=u.g+1;s.g<o&&(s.parent=u,s.g=o,s.f=o+z(s,a,t),s.inOpen||h.push(s))})}return null}function F(f,i,n,a,t){if(f[n][i].isWall||f[t][a].isWall)return null;let l=g.get(i+"."+n+"."+a+"."+t);return l!==void 0||(l=M(f,i,n,a,t),v(l,i,n,a,t)),l}function G(f){k=f}typeof window<"u"&&(globalThis.Pfinder={getPath:M,getPathFromCache:F,makeGrid:E,setMaxCacheSize:G});})();
/**
* @copyright    2023 Juan Jose Capellan
* @license      {@link https://github.com/jjcapellan/pfinder/blob/master/LICENSE | MIT License}
*/
